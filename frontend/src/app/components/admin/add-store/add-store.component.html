<!-- Toast -->
<div *ngIf="toastMessage" class="modern-toast-wrapper">
  <div class="modern-toast-card" [ngClass]="toastType">
    <div class="toast-accent"></div>
    <div class="toast-content">
      <div class="toast-icon">
        <i *ngIf="toastType === 'success'" class="fas fa-check-circle"></i>
        <i *ngIf="toastType === 'danger'" class="fas fa-exclamation-circle"></i>
      </div>
      <div class="toast-body-text">
        <strong class="toast-status">
          {{ toastType === 'success' ? 'Success' : 'Error' }}
        </strong>
        <p class="toast-msg-content">{{ toastMessage }}</p>
      </div>
      <button class="btn-toast-close" (click)="toastMessage=null">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>
</div>

<!-- Centered Form -->
<div class="page-wrapper">
  <div class="form-card">

    <h2 class="fw-bold mb-2">Add New Store</h2>
    <p class="text-muted mb-4">Fill in the store details below</p>

    <form [formGroup]="storeForm" (ngSubmit)="onSubmit()">

      <!-- Store Name -->
      <div class="form-floating mb-3">
        <input class="form-control" placeholder="Store Name" formControlName="name">
        <label>Store Name</label>
      </div>

      <!-- Store Code Info -->
      <div *ngIf="lastStoreMessage" class="store-code-info">
        {{ lastStoreMessage }}
      </div>

      <!-- Store Code -->
      <div class="form-floating mb-3">
        <input class="form-control" formControlName="storeCode" readonly>
        <label>Store Code</label>
      </div>

      <!-- Served Pincodes -->
      <div class="form-floating mb-3">
        <input class="form-control"
               placeholder="Pincodes"
               formControlName="servedPincodes">
        <label>Served Pincodes (comma separated)</label>
      </div>

      <!-- Address Fields -->
      <div class="form-floating mb-3">
        <input class="form-control" placeholder="Line 1" formControlName="line1">
        <label>Address Line 1</label>
      </div>

      <div class="form-floating mb-3">
        <input class="form-control" placeholder="Area" formControlName="area">
        <label>Area</label>
      </div>

      <div class="form-floating mb-3">
        <input class="form-control" placeholder="City" formControlName="city">
        <label>City</label>
      </div>

      <div class="form-floating mb-3">
        <input class="form-control" placeholder="Pincode" formControlName="pincode">
        <label>Pincode</label>
      </div>

      <div class="form-floating mb-3">
        <input class="form-control" placeholder="State" formControlName="state">
        <label>State</label>
      </div>

      <!-- Manager Dropdown -->
      <div class="form-floating mb-4">
        <select class="form-select" formControlName="manager">
          <option value="" disabled>Select Manager</option>
          <option *ngFor="let m of managers" [value]="m._id">
            {{ m.name }}
          </option>
        </select>
        <label>Manager</label>
      </div>

      <!-- Submit -->
      <button class="btn btn-primary w-100 btn-lg"
              [disabled]="storeForm.invalid || isSubmitting">
        {{ isSubmitting ? 'Adding Store...' : 'Add Store' }}
      </button>

    </form>
  </div>
</div>
